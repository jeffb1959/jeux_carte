<!-- Version v7.5.0 — 2025-11-14 — version stable sans doublons -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Dame de Pique — v7.4.1 (zone test)</title>
  <link rel="stylesheet" href="dame_de_pique.css">
</head>
<body>
  <main class="wrap">
    <header class="card" aria-labelledby="title">
      <h1 id="title">Dame de Pique</h1>
      <h2 id="passRule" class="subhead">Règle : —</h2>
      <div class="muted" id="meta" style="margin-top:4px">
        Code soirée: <strong id="code">—</strong> • Tour <span id="round">1</span> • Brasseur: <strong id="dealerName">—</strong>
      </div>
    </header>

    <section class="card" aria-labelledby="playersTitle">
      <h2 id="playersTitle" style="margin:0 0 8px;font-size:1.2rem">Joueurs</h2>
      <div id="playersList" class="grid" style="display:grid;gap:10px"></div>
    </section>

    <section class="card" aria-labelledby="scoresTitle">
      <h2 id="scoresTitle" style="margin:0 0 8px;font-size:1.2rem">Scores</h2>
      <button id="btnOpenScore" class="btn" type="button" aria-haspopup="dialog" aria-controls="modalScore">
        Inscrire mon pointage
      </button>
      <!-- <div id="totals" class="grid" style="display:grid;gap:10px;margin-top:10px"></div> -->
      <div id="roundStatus" class="muted" aria-live="polite">0/0 soumis</div>
      <div id="roundError" class="muted" aria-live="assertive"></div>
    </section>

    <!-- Fenêtre modale de saisie de score (même pour tous les joueurs) -->
    <div id="modalScoreBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalScoreTitle">
      <div class="modal">
        <h3 id="modalScoreTitle">Saisie du pointage — Ronde <span id="modalRound">1</span></h3>
        <div class="muted" id="modalInfo">
          Chaque joueur ouvre cette fenêtre depuis le bouton « Inscrire mon pointage ».
        </div>

        <div id="modalPlayers" style="margin-top:8px;"></div>

        <div style="margin-top:10px;">
          Mon score pour cette ronde :
          <input id="myScoreInput" type="number" min="0" max="25" step="1" value="0" />
        </div>

        <div id="modalMsg" class="msg muted"></div>

        <div class="toolbar">
          <button id="btnCancelScore" class="btn btn-secondary" type="button">Annuler</button>
          <button id="btnAcceptScore" class="btn" type="button">Accepter</button>
        </div>
      </div>
    </div>

    <details class="card" id="diag" style="font-size:.95rem">
      <summary>Diagnostics</summary>
      <pre id="diagOutput" style="white-space:pre-wrap"></pre>
    </details>

    <section class="card" id="finishSection">
      <button id="btnFinish" class="btn btn-pale-danger hold2s" type="button" aria-label="Fin de partie (maintenir 2 secondes)">
        <span>Fin de partie (maintenir)</span>
        <div class="fill" aria-hidden="true"></div>
      </button>
    </section>

    <div class="footer">v7.4.1 — zone test (totaux + ronde + fin de partie gameOver)</div>
  </main>

  <!-- Config Firebase -->
  <script>
    window.firebaseConfig = {
      apiKey: "AIzaSyDLSnoOCdHXl-5sKaJ55hhFbv-quS156kg",
      authDomain: "soireecartev2.firebaseapp.com",
      projectId: "soireecartev2",
      storageBucket: "soireecartev2.firebasestorage.app",
      messagingSenderId: "784781686361",
      appId: "1:784781686361:web:033693cb22fb1a55af2348"
    };
  </script>

  <!-- === init/app === -->
  <script type="module" src="dame_de_pique_init.js"></script>

  <!-- === data/soiree === -->
  <script type="module" src="dame_de_pique_soiree.js"></script>

  <!-- === data/scores === (adaptatif) -->
  <script type="module" src="dame_de_pique_scores.js"></script>

  <!-- === logic/rounds === -->
  <script type="module" src="dame_de_pique_rounds.js"></script>

  <!-- === ui/render === -->
  <script type="module" src="dame_de_pique_ui_render.js"></script>

  <!-- === actions/ui === -->
  <script type="module" src="dame_de_pique_ui_actions.js"></script>
</body>
</html>
