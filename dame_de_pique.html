<!-- Version v7.5.0 — 2025-11-14 — Zone TEST : séparation CSS / JS (même UI, même logique) -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Dame de Pique — v7.5.0 (zone test)</title>
  <link rel="stylesheet" href="dame_de_pique.css">
</head>
<body>
  <main class="wrap">
    <header class="card" aria-labelledby="title">
      <h1 id="title">Dame de Pique</h1>
      <h2 id="passRule" class="subhead">Règle : —</h2>
      <div class="muted" id="meta" style="margin-top:4px">
        Code soirée: <strong id="code">—</strong> • Tour <span id="round">1</span> • Brasseur: <strong id="dealerName">—</strong>
      </div>
    </header>

    <section class="card" aria-labelledby="playersTitle">
      <h2 id="playersTitle" class="subhead">Joueurs et totaux</h2>
      <div id="playersList"></div>
      <div id="grandChelemBanner" class="badge" style="display:none">Grand chelem détecté sur la dernière ronde</div>
    </section>

    <section class="card" aria-labelledby="scoresTitle">
      <h2 id="scoresTitle" class="subhead">Scores de la ronde en cours</h2>
      <p class="muted">
        Ronde <span id="round2">1</span> • Somme des scores attendue : <strong>25 points</strong>.
      </p>
      <div id="roundStatus" class="line">
        <span>Scores soumis :</span>
        <strong id="roundStatusValue">0/0</strong>
      </div>
      <div id="roundError" class="line" style="display:none"></div>
      <button id="btnOpenScore" class="btn" type="button">Inscrire mon pointage</button>
    </section>

    <section class="card" aria-labelledby="controlsTitle">
      <h2 id="controlsTitle" class="subhead">Contrôles de la partie</h2>
      <p class="muted" id="leaderInfo">Vous n’êtes pas l’hôte de la partie.</p>
      <div class="line">
        <button id="btnFinish" class="btn btn-pale-danger hold2s" type="button" style="display:none">
          <span class="fill"></span>
          <span class="label">Fin de la partie (maintenir 2 secondes)</span>
        </button>
        <button id="btnReload" class="btn" type="button">Rafraîchir l’écran</button>
      </div>
    </section>

    <section class="card" aria-labelledby="diagTitle">
      <h2 id="diagTitle" class="subhead">Diagnostics (debug)</h2>
      <pre id="diagOutput" style="white-space:pre-wrap;font-size:.8rem;max-height:200px;overflow:auto"></pre>
    </section>

    <div class="footer">v7.5.0 — zone test (totaux + ronde + fin de partie gameOver)</div>
  </main>

  <!-- Fenêtre modale score -->
  <dialog id="scoreDialog">
    <form method="dialog" id="scoreForm" class="modal">
      <header class="modal-header">
        <h2 class="modal-title">Inscrire mon pointage</h2>
      </header>
      <section class="modal-body">
        <p class="muted">
          Joueur : <strong id="currentPlayerName">—</strong><br>
          Ronde : <strong id="currentRoundLabel">1</strong>
        </p>
        <label class="modal-label" for="scoreInput">
          Votre score (0 à 25) — la somme de tous les joueurs doit être 25
        </label>
        <input id="scoreInput" name="score" type="number" min="0" max="25" step="1" inputmode="numeric" />
        <p id="modalError" class="modal-error" style="display:none"></p>
        <p id="modalInfo" class="modal-info">
          Si un joueur fait un <strong>grand chelem (25)</strong>, le système ajustera automatiquement les totaux
          (0 pour lui, 25 pour les autres).
        </p>
      </section>
      <footer class="modal-footer">
        <button type="submit" class="btn">Enregistrer le score</button>
        <button type="button" id="btnCancelModal" class="btn">Annuler</button>
      </footer>
    </form>
  </dialog>

  <!-- Config Firebase -->
  <script src="dame_de_pique_config.js"></script>

  <!-- === init/app === -->
  <script type="module" src="dame_de_pique_init.js"></script>

  <!-- === data/soiree === -->
  <script type="module" src="dame_de_pique_soiree.js"></script>

  <!-- === data/scores === (adaptatif) -->
  <script type="module" src="dame_de_pique_scores.js"></script>

  <!-- === logic/rounds === -->
  <script type="module" src="dame_de_pique_rounds.js"></script>

  <!-- === ui/render === -->
  <script type="module" src="dame_de_pique_render.js"></script>

  <!-- === actions/ui === -->
  <script type="module" src="dame_de_pique_actions.js"></script>
</body>
</html>
